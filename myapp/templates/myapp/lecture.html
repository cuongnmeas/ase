
<div class="contentpanel" style="padding-left: 12%;">

	<div id="timeline-list" class="row" style="max-width: 950px;">

		<div class="col-sm-6">
			<div class="panel panel-dark panel-alt timeline-post">
				<!-- Start block -->
				<form method="post" name="formcreatepost" id="formcreatepost">
					{% csrf_token %}
					<input type="hidden" name="posttype" value="2">
					<div class="col-md">
						<div class="panel panel-default">
							<form>
								<div class="panel-body">
									<div class="row row-pad-5" style="margin-top: 10px;width: 98%; margin-left: 1%;">
										<div class="col-lg-6">
											<input type="Date" name="dtpfromdate" placeholder="from date"
												class="datepicker" style="width: 100%; border: 1px solid #BDE0BE;">
										</div>
										<div class="col-lg-6">
											<input type="Date" name="dtptodate" placeholder="to date"
												class="datepicker" style="width: 100%; border: 1px solid #BDE0BE;">
										</div>
									</div>
									<div class="col-lg" style="margin-top: 10px;width: 98%; margin-left: 1%;">
										<input name="txtTitle" type="text" class="form-control" required="required"
											placeholder="Title of lecture" value="{{Title}}" maxlength="100" style="width: 100%; border: 1px solid #BDE0BE;"/>
									</div>
									<div class="col-lg" style="margin-top: 10px;width: 98%; margin-left: 1%;">
										<input name="txtPlace" type="text" class="form-control"
											placeholder="Place to learn" value="{{place}}" maxlength="100" style="width: 100%; border: 1px solid #BDE0BE;"/>
									</div>
									<div class="col-lg" style="margin-top: 10px;width: 98%; margin-left: 1%;">
										<input name="txtCost" type="text" class="form-control" required="required"
											placeholder="learning cost" value="{{cost}}" maxlength="15" style="width: 100%; border: 1px solid #BDE0BE;"/>
									</div>

									<!-- row -->
									<div class="col-lg" style="margin-top: 10px;width: 98%; margin-left: 1%;">
									<textarea name="txtContent" id="autoResizeTA" class="form-control" required="required" maxlength="2000" rows="5" placeholder="Description of lecture" style="width: 100%; border: 1px solid #BDE0BE;"></textarea>
									</div>
								</div>
						</div>
						<!-- panel -->
					</div>
				</form>
				<!-- End of block -->
				<!-- panel-body -->
				<div class="panel-footer">
					<div class="timeline-btns pull-left">
						<a href="#" class="tooltips" data-toggle="tooltip"
							title="Add Photo"><i class="glyphicon glyphicon-picture"></i></a>
						<a href="#" class="tooltips" data-toggle="tooltip"
							title="Add Video"><i
							class="glyphicon glyphicon-facetime-video"></i></a> <a href="#"
							class="tooltips" data-toggle="tooltip" title="Check In"><i
							class="glyphicon glyphicon-map-marker"></i></a> <a href="#"
							class="tooltips" data-toggle="tooltip" title="Tag User"><i
							class="glyphicon glyphicon-user"></i></a>
					</div>
					<!--timeline-btns -->
					<button class="btn btn-primary pull-right" onclick="createpost();">Submit Post</button>
				</div>
				</form> <!-- end of form mentor post -->
				<!-- panel-footer -->
			</div>
		</div>
		<!-- col-sm-6 -->
		<!-- Start lecture content from here -->
		{% for post in posts %} 
		{% if post.user_id.id == user.id%}
		<div class="col-sm-6">
			<div class="panel panel-default panel-timeline">
				<div class="panel-heading">

					<div class="media">
						<a href="#" class="pull-left"> <img alt=""
							src="images/photos/user3.png" class="media-object">
						</a>
						<div class="media-body">
							<h4 class="text-primary">
								{{ post.user_id.username }} <small>created a lecture</small>
							</h4>
							<small class="text-muted">{{ post.published_date|date:'Y-M-d' }}</small>
						</div>
					</div>
					<!-- media -->
				</div>
				<!-- panel-heading -->
				<div class="panel-body">
					<div class="media">
						{% if post.imagelink != None %}
						<a href="#" class="pull-left"> 
						<img alt="" src="{{post.imagelink}}" class="media-object">
						</a>
						{% endif%}
						<div class="media-body" style="text-align: justify;">
							<h4>
								<a href="post-detail?post_id={{ post.id }}">{{post.title}}</a>
							</h4>
							<p>{{ post.content| truncatechars:100 }}</p>
							<a href = "post-detail?post_id={{ post.id }}" ><button class="btn btn-sm btn-white">Read More</button></a>
						</div>
					</div>

					<div class="timeline-btns">
						<div class="pull-left">
							<a href="#" class="tooltips" data-toggle="tooltip" title="Like"><i
								class="glyphicon glyphicon-heart"></i></a> <a href="#"
								class="tooltips" data-toggle="tooltip" title="Add Comment"><i
								class="glyphicon glyphicon-comment"></i></a> <a href="#"
								class="tooltips" data-toggle="tooltip" title="Share"><i
								class="glyphicon glyphicon-share"></i></a>
						</div>
						<div class="pull-right">
							<small class="text-muted">1 people like this</small>
						</div>
					</div>
				</div>
				<!-- panel-body -->
				<!-- for comments from here -->
				{% for cmt in post.comments %} 
				{% if cmt.user_id.id == post.user_id.id %}
				<div class="alert alert-success"
					style="margin-left: 5%; margin-right: 30%;">
					<div class="media" style="padding-bottom: 0px;">
						<a href="#" class="pull-left"> <img alt=""
							src="images/photos/user3.png" class="media-object"
							style="width: 32px;"></a>
						<h4>
							<a href="profile?user_id={{ cmt.user_id }}">{{cmt.user_id.username}}</a>
							- Since:{{cmt.create_date|date:'Y-M-d'}}
						</h4>
						<div class="media-body">
							<span>{{cmt.content}}</span>
						</div>
					</div>
				</div>
				{% else %}
				<div class="alert alert-danger"
					style="margin-left: 30%; margin-right: 5%;">
					<div class="media" style="padding-bottom: 0px;">
						<a href="#" class="pull-right"> <img alt=""
							src="images/photos/user3.png" class="media-object"
							style="width: 32px;"></a>
						<h4>
							<a href="profile?user_id={{ cmt.user_id }}">{{cmt.user_id.username}}</a>
							- {{cmt.create_date|date:'Y-M-d'}}
						</h4>
						<div class="media-body ">
							<span>{{cmt.content}}</span>
						</div>
					</div>
				</div>
				{% endif %} {% endfor %}
				<!-- end for comment -->
				<form method="post" name="form" >
					{% csrf_token %} 
					<input type="hidden" name="hd_post_id" value="{{ post.id }}">
					<input type="hidden" name="posttype" value="1">
					<div class="panel-footer">
						<div class="media">
							<a href="#" class="pull-left"> <img alt=""
								src="images/photos/user3.png" class="media-object">
							</a>
							<div class="media-body">
								<input id="txtComment" type="text" name="txtComment"
									class="form-control" placeholder="Write a comment"
									onkeydown="if (event.keyCode == 13) commentpost();" />
							</div>
						</div>
						<!-- media -->
					</div>
				</form>
			</div>
			<!-- panel -->
		</div>
		<!-- col-sm-6 -->
		{% endif %} {% endfor %}
	</div>
</div>
<script type="text/javascript">
	function createpost(){
		alert('creating post...');
		document.getElementById("formcreatepost").submit();
	};
	function commentpost(){
		alert('comment post...');
	};
	
	function getContentByMetaTagName(c) {
	  for (var b = document.getElementsByTagName("meta"), a = 0; a < b.length; a++) {
		if (c == b[a].name || c == b[a].getAttribute("property")) {
			return b[a].content; 
			}
		} return false;
	};
	function gettitle(){
	
		var title = getContentByMetaTagName('title');
		document.getElementById("txtcontent").value = title;
		alert('done');
		alert('sendreq');
		document.getElementById("txtcontent").value = httpGet('http://stackoverflow.com/');
	};
	function httpGet(theUrl)
	 {
	 	alert('start get url');
		var xmlHttp = null;
		xmlHttp = new XMLHttpRequest();
		xmlHttp.open( "GET", theUrl, false );
		xmlHttp.send();
		alert(xmlHttp.responseText);
		return xmlHttp.responseText;
	 };
	  function sendRequest(url) 
    { 
    	alert('into func!!');
        var response = null; 
        //var connection = new ActiveXObject("Microsoft.XMLHTTP");
        var connection = new XMLHttpRequest();  
        try 
        { 
            connection.open("GET", url, false); 
            connection.send(); 
            alert(connection.readyState);
            if(connection.readyState == 4) 
            	response = connection.responseText;
			alert(response); 
        } 
        catch(e) 
        { 
            alert("ERROR: The remote host could not be found or the connection was refused."); 
            return false; 
        } 
        alert(response); 
        return false; 
    } 
	
</script>
